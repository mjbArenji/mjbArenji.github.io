<!DOCTYPE html>
<html>
<body>
<script type="text/javascript">
(function() {
	var localStorage = window.localStorage;

    function handleRequest(event) {
		console.log('handleRequest from origin: ', event.origin);
        if (event.origin !== "https://mbradburn.github.io") {
			console.error('Origin not allowed: ', event.origin);
		}
		var data = event.data;
		for (var key in data) {
			if (Object.prototype.hasOwnProperty(key)) {
				localStorage.setItem(key, data[key]);
			}
		}
    }
    if (window.addEventListener) {
        window.addEventListener("message", handleRequest, false);
    } else if (window.attachEvent) {
		// attachEvent is for old IE
        window.attachEvent("onmessage", handleRequest);
    }
})();
</script>
</body>
